# Copyright 2024 AXA. All rights reserved.
---
apiVersion: gateway.mulesoft.com/v1alpha1
kind: ApiInstance
metadata:
  name: ingress-http
  namespace: gateway

spec:
  address: http://0.0.0.0:8084
  services:
    upstream:
      address: http://sse.dev
      routes:
        - config:
            destinationPath: /
# policies:
#   - policyRef:
#       name: group-message-logging-policy-v1-0-impl
#       namespace: default
#     # Fill the config with a policy configuration that matches the schema specified in the policy
#     # definition gcl.yaml. Eg:
#     # config:
#     #   someProperty: desiredValue
#     config: {}
#     order: 1
#   - policyRef:
#       name: stream-idle-timeout-flex
#       namespace: default
#     config:
#       timeout: 50
#     order: 2
---
apiVersion: gateway.mulesoft.com/v1alpha1
kind: PolicyBinding
metadata:
  name: hello-flex-gateway-auth
  namespace: e-commerce
spec:
  targetRef:
    name: hello-flex-gateway-instance
    namespace: e-commerce
  policyRef:
    name: http-basic-authentication-flex
    namespace: default
  config:
    username: chris
    password: admin
  order: 2
